{% extends "media/html/_public.html" %}
{% load repository_extras %}

{% block content %}
<div class="container">

    <div class="row">
        <h3>
            <span class="glyphicon glyphicon-list-alt" aria-hidden="true"></span>&nbsp;&nbsp;
            MyRMDB Account Registration
        </h3>
        <br/>
        <form method="post" action="/register/">
            {% csrf_token %}
            <div class="row">
                <div class="col-lg-4 col-md-4 col-sm-12 col-xs-12">
                    <div class="panel panel-primary">
                        <div class="panel-heading">
                            <h2 class="panel-title"><span class="glyphicon glyphicon-credit-card"></span>&nbsp;&nbsp;Account Login</h2>
                        </div>
                        <div class="panel-body">
                            <div class="row" data-toggle="popover" data-placement="bottom" title="User ID" data-content="It must be at least 3 characters long. Alphanumeric characters only. Previously used User IDs are not available.">
                                <div class="col-lg-5 col-md-5 col-sm-5 col-xs-5">
                                    <span class="pull-right"><span class="glyphicon glyphicon-user"></span>&nbsp;&nbsp;User Name:</span>
                                </div>
                                <div class="col-lg-7 col-md-7 col-sm-7 col-xs-7">{{ reg_form.username }}</div>
                            </div>
                            <br/>
                            <div class="row" data-toggle="popover" data-placement="bottom" title="Password" data-content="It must be at least 6 characters long. No limit on combinations.">
                                <div class="col-lg-5 col-md-5 col-sm-5 col-xs-5">
                                    <span class="pull-right"><span class="glyphicon glyphicon-lock"></span>&nbsp;&nbsp;Password:</span>
                                </div>
                                <div class="col-lg-7 col-md-7 col-sm-7 col-xs-7">{{ reg_form.password }}</div>
                            </div>
                            <br/>
                            <div class="row" data-toggle="popover" data-placement="bottom" title="Password" data-content="Type your password for a second time. Both times must match.">
                                <div class="col-lg-5 col-md-5 col-sm-5 col-xs-5">
                                    <span class="text-right pull-right"><span class="glyphicon glyphicon-refresh"></span>&nbsp;&nbsp;Repeat Password:</span>
                                </div>
                                <div class="col-lg-7 col-md-7 col-sm-7 col-xs-7">{{ reg_form.repeat_password }}</div>
                            </div>
                            <br/>
                        </div>
                    </div>
                </div>
                <div class="col-lg-8 col-md-8 col-sm-12 col-xs-12">
                    <div class="panel panel-info">
                        <div class="panel-heading">
                            <h2 class="panel-title"><span class="glyphicon glyphicon-user"></span>&nbsp;&nbsp;Contact Information</h2>
                        </div>
                        <div class="panel-body">
                            <br/>
                            <div class="row" data-toggle="popover" data-placement="bottom" title="Contact Name" data-content="First name must be at least 3 characters, while last time must be at least 2 characters.">
                                <div class="col-lg-3 col-md-3 col-sm-5 col-xs-5">
                                    <span class="pull-right"><span class="glyphicon glyphicon-credit-card"></span>&nbsp;&nbsp;First Name:</span>
                                </div>
                                <div class="col-lg-3 col-md-3 col-sm-7 col-xs-7">
                                    {{reg_form.first_name}}
                                    <br class="hidden-lg hidden-md" />
                                </div>
                                <div class="col-lg-2 col-md-2 col-sm-5 col-xs-5">
                                    <span class="pull-right"><span class="glyphicon glyphicon-credit-card"></span>&nbsp;&nbsp;Last Name:</span>
                                </div>
                                <div class="col-lg-3 col-md-3 col-sm-7 col-xs-7">
                                    {{reg_form.last_name}}
                                    <br class="hidden-lg hidden-md" />
                                </div>
                                <div class="col-lg-1 col-md-1 hidden-sm hidden-xs"></div>
                            </div>
                            <br/>
                            <div class="row" data-toggle="popover" data-placement="bottom" title="Affiliation" data-content="Institution and department names must be at least 4 characters long.">
                                <div class="col-lg-3 col-md-3 col-sm-5 col-xs-5">
                                <span class="pull-right"><span class="glyphicon glyphicon-education"></span>&nbsp;&nbsp;Insititution:</span>
                                </div>
                                <div class="col-lg-3 col-md-3 col-sm-7 col-xs-7">
                                    {{reg_form.institution}}
                                    <br class="hidden-lg hidden-md" />
                                </div>
                                <div class="col-lg-2 col-md-2 col-sm-5 col-xs-5">
                                    <span class="pull-right"><span class="glyphicon glyphicon-tower"></span>&nbsp;&nbsp;Department:</span>
                                </div>
                                <div class="col-lg-3 col-md-3 col-sm-7 col-xs-7">
                                    {{reg_form.department}}
                                    <br class="hidden-lg hidden-md" />
                                </div>
                                <div class="col-lg-1 col-md-1 hidden-sm hidden-xs"></div>
                            </div>
                            <br/>
                            <div class="row" data-toggle="popover" data-placement="bottom" title="Email" data-content="Please use valid email address.">
                                <div class="col-lg-3 col-md-3 col-sm-5 col-xs-5">
                                    <span class="pull-right"><span class="glyphicon glyphicon-envelope"></span>&nbsp;&nbsp;E-mail Address:</span>
                                </div>
                                <div class="col-lg-8 col-md-8 col-sm-7 col-xs-7">{{reg_form.email}}</div>
                                <div class="col-lg-1 col-md-1 hidden-sm hidden-xs"></div>
                            </div>
                            <br/>
                        </div>
                    </div>
                </div>
            </div>

            <div class="row">
                <div class="col-lg-12 col-md-12 col-sm-12 col-xs-12">
                    <div class="pull-right">
                        <button type="submit" class="btn btn-inverse"><span class="glyphicon glyphicon-play-circle"></span>&nbsp;&nbsp;Submit&nbsp;</button>
                        &nbsp;
                        <a href="/register/" class="btn btn-default"><span class="glyphicon glyphicon-remove-circle"></span>&nbsp;&nbsp;Clear&nbsp;&nbsp;</a>
                    </div>
                </div>
            </div>
        </form>
        <br/><br/>

        <div class="row">
            <div class="col-lg-12 col-md-12 col-sm-12 col-xs-12">
            {% if flag == 1 %}
                <div class="alert alert-success" role="alert">
                    <span class="glyphicon glyphicon-ok-sign" aria-hidden="true"></span>&nbsp;&nbsp;
                    <b>SUCCESS</b>: Your MyRMDB account has been processed. Thank you for registration. Now you can 
                    <a href="/login/" class="btn btn-inverse">
                        <span class="glyphicon glyphicon-share"></span>&nbsp;&nbsp;Sign In&nbsp;
                    </a>.
                </div>
            {% endif %}

            {% if flag == 0 and error_msg %}
                <div class="alert alert-danger" role="alert">
                    <span class="glyphicon glyphicon-remove-sign" aria-hidden="true"></span>&nbsp;&nbsp;
                    <b>ERROR</b>: The following messages were produced:
                    <br/>
                    <ul>
                        {% for msg in error_msg %}
                            <li>{{ msg }}</li>
                        {% endfor %}
                    </ul>
                </div>
            {% endif %}
        </div>
    </div>

</div>
<br/>
{% endblock %}


{% block script %}
    <script type="text/javascript">
        $(document).ready(function() {
            $('.dropdown-toggle').removeClass("active");
            $("#nav_deposit").addClass("active");
            $("#nav_logo").css("text-decoration","none");

            $("#id_username, #id_password, #id_repeat_password, #id_first_name, #id_last_name, #id_institution, #id_department, #id_email").addClass("form-control");
        });
    </script>

{% endblock %}
