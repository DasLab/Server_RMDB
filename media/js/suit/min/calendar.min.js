var CalendarNamespace={monthsOfYear:gettext("January February March April May June July August September October November December").split(" "),daysOfWeek:gettext("S M T W T F S").split(" "),firstDayOfWeek:parseInt(get_format("FIRST_DAY_OF_WEEK")),isLeapYear:function(a){return(((a%4)==0)&&((a%100)!=0)||((a%400)==0))},getDaysInMonth:function(b,a){var c;if(b==1||b==3||b==5||b==7||b==8||b==10||b==12){c=31}else{if(b==4||b==6||b==9||b==11){c=30}else{if(b==2&&CalendarNamespace.isLeapYear(a)){c=29}else{c=28}}}return c},draw:function(t,j,o,e,l){var r=new Date();var s=r.getDate();var k=r.getMonth()+1;var h=r.getFullYear();var c="";var u=false;if(typeof l!="undefined"){u=(l.getUTCFullYear()==j&&(l.getUTCMonth()+1)==t)}t=parseInt(t);j=parseInt(j);var q=document.getElementById(o);removeChildren(q);var a=document.createElement("table");quickElement("caption",a,CalendarNamespace.monthsOfYear[t-1]+" "+j);var m=quickElement("tbody",a);var v=quickElement("tr",m);for(var p=0;p<7;p++){quickElement("th",v,CalendarNamespace.daysOfWeek[(p+CalendarNamespace.firstDayOfWeek)%7])}var d=new Date(j,t-1,1-CalendarNamespace.firstDayOfWeek).getDay();var f=CalendarNamespace.getDaysInMonth(t,j);v=quickElement("tr",m);for(var p=0;p<d;p++){var n=quickElement("td",v," ");n.className="nonday"}var g=1;for(var p=d;g<=f;p++){if(p%7==0&&g!=1){v=quickElement("tr",m)}if((g==s)&&(t==k)&&(j==h)){c="today"}else{c=""}if(u&&g==l.getUTCDate()){if(c!=""){c+=" "}c+="selected"}var b=quickElement("td",v,"","class",c);quickElement("a",b,g,"href","javascript:void("+e+"("+j+","+t+","+g+"));");g++}while(v.childNodes.length<7){var n=quickElement("td",v," ");n.className="nonday"}q.appendChild(a)}};function Calendar(b,c,a){this.div_id=b;this.callback=c;this.today=new Date();this.currentMonth=this.today.getMonth()+1;this.currentYear=this.today.getFullYear();if(typeof a!="undefined"){this.selected=a}}Calendar.prototype={drawCurrent:function(){CalendarNamespace.draw(this.currentMonth,this.currentYear,this.div_id,this.callback,this.selected)},drawDate:function(c,b,a){this.currentMonth=c;this.currentYear=b;if(a){this.selected=a}this.drawCurrent()},drawPreviousMonth:function(){if(this.currentMonth==1){this.currentMonth=12;this.currentYear--}else{this.currentMonth--}this.drawCurrent()},drawNextMonth:function(){if(this.currentMonth==12){this.currentMonth=1;this.currentYear++}else{this.currentMonth++}this.drawCurrent()},drawPreviousYear:function(){this.currentYear--;this.drawCurrent()},drawNextYear:function(){this.currentYear++;this.drawCurrent()}};