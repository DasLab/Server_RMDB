function html_unescape(a){a=a.replace(/&lt;/g,"<");a=a.replace(/&gt;/g,">");a=a.replace(/&quot;/g,'"');a=a.replace(/&#39;/g,"'");a=a.replace(/&amp;/g,"&");return a}function id_to_windowname(a){a=a.replace(/\./g,"__dot__");a=a.replace(/\-/g,"__dash__");return a}function windowname_to_id(a){a=a.replace(/__dot__/g,".");a=a.replace(/__dash__/g,"-");return a}function showAdminPopup(d,c){var b=d.id.replace(c,"");b=id_to_windowname(b);var a=d.href;if(a.indexOf("?")==-1){a+="?_popup=1"}else{a+="&_popup=1"}var e=window.open(a,b,"height=500,width=800,resizable=yes,scrollbars=yes");e.focus();return false}function showRelatedObjectLookupPopup(a){return showAdminPopup(a,/^lookup_/)}function dismissRelatedLookupPopup(d,c){var a=windowname_to_id(d.name);var b=document.getElementById(a);if(b.className.indexOf("vManyToManyRawIdAdminField")!=-1&&b.value){b.value+=","+c}else{document.getElementById(a).value=c}d.close()}function showRelatedObjectPopup(c){var b=c.id.replace(/^(change|add|delete)_/,"");b=id_to_windowname(b);var a=c.href;var d=window.open(a,b,"height=500,width=800,resizable=yes,scrollbars=yes");d.focus();return false}function dismissAddRelatedObjectPopup(f,c,h){c=html_unescape(c);h=html_unescape(h);var b=windowname_to_id(f.name);var d=document.getElementById(b);var g;if(d){var e=d.nodeName.toUpperCase();if(e=="SELECT"){g=new Option(h,c);d.options[d.options.length]=g;g.selected=true}else{if(e=="INPUT"){if(d.className.indexOf("vManyToManyRawIdAdminField")!=-1&&d.value){d.value+=","+c}else{d.value=c}}}django.jQuery(d).trigger("change")}else{var a=b+"_to";g=new Option(h,c);SelectBox.add_to_cache(a,g);SelectBox.redisplay(a)}f.close()}function dismissChangeRelatedObjectPopup(e,c,g,a){c=html_unescape(c);g=html_unescape(g);var f=windowname_to_id(e.name).replace(/^edit_/,"");var d=interpolate("#%s, #%s_from, #%s_to",[f,f,f]);var b=django.jQuery(d);b.find("option").each(function(){if(this.value==c){this.innerHTML=g;this.value=a}});e.close()}function dismissDeleteRelatedObjectPopup(d,b){b=html_unescape(b);var e=windowname_to_id(d.name).replace(/^delete_/,"");var c=interpolate("#%s, #%s_from, #%s_to",[e,e,e]);var a=django.jQuery(c);a.find("option").each(function(){if(this.value==b){django.jQuery(this).remove()}}).trigger("change");d.close()}showAddAnotherPopup=showRelatedObjectPopup;dismissAddAnotherPopup=dismissAddRelatedObjectPopup;