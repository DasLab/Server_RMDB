(function(b){var a;b.fn.actions=function(c){var l=b.extend({},b.fn.actions.defaults,c);var d=b(this);var g=false;var f=function(m){if(m){k()}else{j()}b(d).prop("checked",m).parent().parent().toggleClass(l.selectedClass,m)},h=function(){var m=b(d).filter(":checked").length;b(l.counterContainer).html(interpolate(ngettext("%(sel)s of %(cnt)s selected","%(sel)s of %(cnt)s selected",m),{sel:m,cnt:_actions_icnt},true));b(l.allToggle).prop("checked",function(){var n;if(m==d.length){n=true;k()}else{n=false;i()}return n})},k=function(){b(l.acrossClears).hide();b(l.acrossQuestions).show();b(l.allContainer).hide()},e=function(){b(l.acrossClears).show();b(l.acrossQuestions).hide();b(l.actionContainer).toggleClass(l.selectedClass);b(l.allContainer).show();b(l.counterContainer).hide()},j=function(){b(l.acrossClears).hide();b(l.acrossQuestions).hide();b(l.allContainer).hide();b(l.counterContainer).show()},i=function(){j();b(l.acrossInput).val(0);b(l.actionContainer).removeClass(l.selectedClass)};b(l.counterContainer).show();b(this).filter(":checked").each(function(m){b(this).parent().parent().toggleClass(l.selectedClass);h();if(b(l.acrossInput).val()==1){e()}});b(l.allToggle).show().click(function(){f(b(this).prop("checked"));h()});b("a",l.acrossQuestions).click(function(m){m.preventDefault();b(l.acrossInput).val(1);e()});b("a",l.acrossClears).click(function(m){m.preventDefault();b(l.allToggle).prop("checked",false);i();f(0);h()});a=null;b(d).click(function(n){if(!n){n=window.event}var o=n.target?n.target:n.srcElement;if(a&&b.data(a)!=b.data(o)&&n.shiftKey===true){var m=false;b(a).prop("checked",o.checked).parent().parent().toggleClass(l.selectedClass,o.checked);b(d).each(function(){if(b.data(this)==b.data(a)||b.data(this)==b.data(o)){m=(m)?false:true}if(m){b(this).prop("checked",o.checked).parent().parent().toggleClass(l.selectedClass,o.checked)}})}b(o).parent().parent().toggleClass(l.selectedClass,o.checked);a=o;h()});b("form#changelist-form table#result_list tr").find("td:gt(0) :input").change(function(){g=true});b('form#changelist-form button[name="index"]').click(function(m){if(g){return confirm(gettext("You have unsaved changes on individual editable fields. If you run an action, your unsaved changes will be lost."))}});b('form#changelist-form input[name="_save"]').click(function(n){var m=false;b("select option:selected",l.actionContainer).each(function(){if(b(this).val()){m=true}});if(m){if(g){return confirm(gettext("You have selected an action, but you haven't saved your changes to individual fields yet. Please click OK to save. You'll need to re-run the action."))}else{return confirm(gettext("You have selected an action, and you haven't made any changes on individual fields. You're probably looking for the Go button rather than the Save button."))}}})};b.fn.actions.defaults={actionContainer:"div.actions",counterContainer:"span.action-counter",allContainer:"div.actions span.all",acrossInput:"div.actions input.select-across",acrossQuestions:"div.actions span.question",acrossClears:"div.actions span.clear",allToggle:"#action-toggle",selectedClass:"selected"}})(django.jQuery);